{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD\\\\\\u05E4\\u05D9\\u05EA\\u05D5\\u05D7 \\u05D0\\u05E4\\u05DC\\u05D9\\u05E7\\u05E6\\u05D9\\u05D5\\u05EA\\\\webP\\\\webP\\\\client\\\\src\\\\pages\\\\admin.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport Layout from \"../components/Layout\";\nimport styled from \"styled-components\";\nimport HomeList from \"../adminScreens/HomeList\";\nimport HomeGrid from \"../adminScreens/HomeGrid\";\nimport { StateContext, DispatchContext } from \"../context/GlobalContext\";\nimport axios from \"axios\";\nimport HomeDetails from \"../components/HomeDetails\";\nimport { GoDashboard } from \"react-icons/go\";\nimport { FaListUl } from \"react-icons/fa\";\nimport { BsGrid } from \"react-icons/bs\";\nimport SubNavigation, { SubNavItem } from \"../components/SubNavigation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  height: 100%;\n  padding: 0 calc((100vw - 1300px) / 2);\n  padding-top: 60px;\n`;\n_c = Container;\nconst MainContent = styled.div`\n  flex: 1;\n`;\n_c2 = MainContent;\n\nfunction Admin() {\n  _s();\n\n  const state = useContext(StateContext);\n  const dispatch = useContext(DispatchContext);\n  const {\n    userHomes,\n    loading,\n    error\n  } = state.homesList;\n  const [homesList, setHomesList] = useState(userHomes);\n  const [selectedHome, setSelectedHome] = useState(null);\n  const [openedTab, setOpnedTab] = useState(null);\n  useEffect(() => {\n    async function getHomes() {\n      if (homesList.length === 0) {\n        dispatch({\n          type: \"HOME_LIST_USER_REQUEST\"\n        });\n\n        try {\n          const config = {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: `Bearer ${localStorage.userToken}`\n            }\n          };\n          const {\n            data\n          } = await axios.get(\"/api/homes/user\", config);\n          setHomesList([...data]);\n          dispatch({\n            type: \"HOME_LIST_USER_SUCCESS\",\n            payload: [...data]\n          });\n        } catch (e) {\n          dispatch({\n            type: \"HOME_LIST_USER_FAIL\",\n            payload: \"Someting went wrong\"\n          });\n        }\n      }\n    }\n\n    getHomes();\n  }, [dispatch, homesList]);\n\n  const deleteHome = async home => {\n    if (window.confirm(`Are you sure you want to delete ${home.address}?`)) {\n      dispatch({\n        type: \"HOME_DELETE_REQUEST\"\n      });\n\n      try {\n        const config = {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n            Authorization: `Bearer ${localStorage.userToken}`\n          }\n        };\n        await axios.delete(`/api/homes/${home._id}`, config);\n        dispatch({\n          type: \"HOME_DELETE_SUCCESS\",\n          payload: home\n        });\n      } catch (e) {\n        dispatch({\n          type: \"HOME_DELETE_FAIL\",\n          payload: \"Someting went wrong\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: !selectedHome ? /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(SubNavigation, {\n        children: [/*#__PURE__*/_jsxDEV(SubNavItem, {\n          className: openedTab === null || openedTab === \"dashboard\" ? \"selected\" : \"\",\n          onClick: () => setOpnedTab(null),\n          children: [/*#__PURE__*/_jsxDEV(GoDashboard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SubNavItem, {\n          className: openedTab === \"propertyList\" ? \"selected\" : \"\",\n          onClick: () => setOpnedTab(\"propertyList\"),\n          children: [/*#__PURE__*/_jsxDEV(FaListUl, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Property List\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SubNavItem, {\n          className: openedTab === \"propertyGrid\" ? \"selected\" : \"\",\n          onClick: () => setOpnedTab(\"propertyGrid\"),\n          children: [/*#__PURE__*/_jsxDEV(BsGrid, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Property Grid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MainContent, {\n        children: [(openedTab === \"dashboard\" || openedTab === null) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"In Development\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), openedTab === \"propertyList\" && /*#__PURE__*/_jsxDEV(HomeList, {\n          homesList: homesList,\n          setSelectedHome: setSelectedHome,\n          deleteHome: deleteHome\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this), openedTab === \"propertyGrid\" && /*#__PURE__*/_jsxDEV(HomeGrid, {\n          homesList: homesList,\n          setSelectedHome: setSelectedHome,\n          deleteHome: deleteHome\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(HomeDetails, {\n      home: selectedHome,\n      back: () => setSelectedHome(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Admin, \"k/fWmfCNzMsoLfieeeibbnnXeZo=\");\n\n_c3 = Admin;\nexport default Admin;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"MainContent\");\n$RefreshReg$(_c3, \"Admin\");","map":{"version":3,"names":["useContext","useEffect","useState","Layout","styled","HomeList","HomeGrid","StateContext","DispatchContext","axios","HomeDetails","GoDashboard","FaListUl","BsGrid","SubNavigation","SubNavItem","Container","div","MainContent","Admin","state","dispatch","userHomes","loading","error","homesList","setHomesList","selectedHome","setSelectedHome","openedTab","setOpnedTab","getHomes","length","type","config","headers","Authorization","localStorage","userToken","data","get","payload","e","deleteHome","home","window","confirm","address","delete","_id","textAlign"],"sources":["C:/Users/User/OneDrive/Desktop/לימודים/פיתוח אפליקציות/webP/webP/client/src/pages/admin.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport Layout from \"../components/Layout\";\nimport styled from \"styled-components\";\nimport HomeList from \"../adminScreens/HomeList\";\nimport HomeGrid from \"../adminScreens/HomeGrid\";\nimport { StateContext, DispatchContext } from \"../context/GlobalContext\";\nimport axios from \"axios\";\nimport HomeDetails from \"../components/HomeDetails\";\nimport { GoDashboard } from \"react-icons/go\";\nimport { FaListUl } from \"react-icons/fa\";\nimport { BsGrid } from \"react-icons/bs\";\nimport SubNavigation, { SubNavItem } from \"../components/SubNavigation\";\n\nconst Container = styled.div`\n  height: 100%;\n  padding: 0 calc((100vw - 1300px) / 2);\n  padding-top: 60px;\n`;\n\nconst MainContent = styled.div`\n  flex: 1;\n`;\n\nfunction Admin() {\n  const state = useContext(StateContext);\n  const dispatch = useContext(DispatchContext);\n  const { userHomes, loading, error } = state.homesList;\n  const [homesList, setHomesList] = useState(userHomes);\n  const [selectedHome, setSelectedHome] = useState(null);\n\n  const [openedTab, setOpnedTab] = useState(null);\n  useEffect(() => {\n    async function getHomes() {\n      if (homesList.length === 0) {\n        dispatch({ type: \"HOME_LIST_USER_REQUEST\" });\n        try {\n          const config = {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: `Bearer ${localStorage.userToken}`,\n            },\n          };\n          const { data } = await axios.get(\"/api/homes/user\",config);\n          setHomesList([...data]);\n          dispatch({ type: \"HOME_LIST_USER_SUCCESS\", payload: [...data] });\n        } catch (e) {\n          dispatch({ type: \"HOME_LIST_USER_FAIL\", payload: \"Someting went wrong\" });\n        }\n      }\n    }\n    getHomes();\n  }, [dispatch, homesList]);\n\n  const deleteHome =async (home)=>{\n    if(window.confirm(`Are you sure you want to delete ${home.address}?`)){\n      dispatch({ type: \"HOME_DELETE_REQUEST\" });\n        try {\n          const config = {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: `Bearer ${localStorage.userToken}`,\n            },\n          };\n          await axios.delete(`/api/homes/${home._id}`,config);\n          dispatch({ type: \"HOME_DELETE_SUCCESS\", payload: home });\n        } catch (e) {\n          dispatch({ type: \"HOME_DELETE_FAIL\", payload: \"Someting went wrong\" });\n        }\n    }\n  }\n\n  return (\n    <Layout>\n      {!selectedHome ? (\n        <Container>\n          <SubNavigation>\n            <SubNavItem\n              className={\n                openedTab === null || openedTab === \"dashboard\"\n                  ? \"selected\"\n                  : \"\"\n              }\n              onClick={() => setOpnedTab(null)}\n            >\n              <GoDashboard />\n              <span>Dashboard</span>\n            </SubNavItem>\n            <SubNavItem\n              className={openedTab === \"propertyList\" ? \"selected\" : \"\"}\n              onClick={() => setOpnedTab(\"propertyList\")}\n            >\n              <FaListUl />\n              <span>Property List</span>\n            </SubNavItem>\n            <SubNavItem\n              className={openedTab === \"propertyGrid\" ? \"selected\" : \"\"}\n              onClick={() => setOpnedTab(\"propertyGrid\")}\n            >\n              <BsGrid />\n              <span>Property Grid</span>\n            </SubNavItem>\n          </SubNavigation>\n          <MainContent>\n            {(openedTab === \"dashboard\" || openedTab === null) && (\n              <div style={{ textAlign: \"center\" }}>In Development</div>\n            )}\n            {openedTab === \"propertyList\" && (\n              <HomeList\n                homesList={homesList}\n                setSelectedHome={setSelectedHome}\n                deleteHome={deleteHome}\n              />\n            )}\n            {openedTab === \"propertyGrid\" && (\n              <HomeGrid\n                homesList={homesList}\n                setSelectedHome={setSelectedHome}\n                deleteHome={deleteHome}\n              />\n            )}\n          </MainContent>\n        </Container>\n      ) : (\n        <HomeDetails home={selectedHome} back={() => setSelectedHome(null)} />\n      )}\n    </Layout>\n  );\n}\n\nexport default Admin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}