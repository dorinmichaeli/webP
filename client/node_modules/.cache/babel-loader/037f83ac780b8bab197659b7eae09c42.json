{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05D3\\u05E0\\u05D9\\u05D0\\u05DC\\u05D4\\\\Desktop\\\\web project\\\\webP\\\\client\\\\src\\\\pages\\\\homes.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { StateContext, DispatchContext } from \"../context/GlobalContext\";\nimport Layout from \"../components/Layout\";\nimport styled from \"styled-components\";\nimport GoogleApiWrapper from \"../components/Map\";\nimport ListCard from \"../components/ListCard\";\nimport Footer from \"../components/Footer\";\nimport HomeDetails from \"../components/HomeDetails\";\nimport Loading from \"../components/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  margin-top: 60px;\n  width: 100%;\n  padding: 0 calc((100vw - 1300px) / 2);\n  color: ${_ref => {\n  let {\n    theme\n  } = _ref;\n  return theme.primaryText;\n}};\n`;\n_c = Container;\nconst ContainerInner = styled.div`\n  margin-top: 60px;\n  width: 100%;\n  color: ${_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.primaryText;\n}};\n  display: ${_ref3 => {\n  let {\n    display\n  } = _ref3;\n  return display;\n}};\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n_c2 = ContainerInner;\nconst MapWrapper = styled.div`\n  flex: 1;\n  max-width: 1920px;\n  height: calc(100vh - 60px);\n  min-height: 200px;\n  position: relative;\n  @media screen and (max-width: 768px) {\n    /* width: 100%; */\n  }\n`;\n_c3 = MapWrapper;\nconst ListWrapper = styled.div`\n  width: 30%;\n  min-width: 400px;\n  padding: 0 1.5rem;\n  overflow-y: scroll;\n  height: calc(100vh - 60px);\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #434343;\n    border-radius: 16px;\n    box-shadow: inset 2px 2px 2px hsl(0deg 0% 100% / 25%),\n      inset -2px -2px 2px rgb(0 0 0 / 25%);\n  }\n  &::-webkit-scrollbar-track {\n    background: linear-gradient(90deg, #434343, #434343 1px, #111 0, #111);\n  }\n  &::-webkit-scrollbar {\n    width: 16px;\n    height: 16px;\n  }\n`;\n_c4 = ListWrapper;\n\nconst HomesPage = _ref4 => {\n  _s();\n\n  let {\n    match,\n    history\n  } = _ref4;\n  const state = useContext(StateContext);\n  const {\n    homes,\n    loading,\n    error\n  } = state.homesList;\n  const dispatch = useContext(DispatchContext);\n  const [homesList, setHomesList] = useState(homes);\n  const [openHomeDetails, setOpenHomeDetails] = useState(false);\n  const [selectedHome, setSelectedHome] = useState(null);\n  useEffect(() => {\n    async function getHomes() {\n      if (homesList.length === 0) {\n        dispatch({\n          type: \"HOME_LIST_REQUEST\"\n        });\n\n        try {\n          const {\n            data\n          } = await axios.get(\"/api/homes\");\n          setHomesList([...data]);\n          dispatch({\n            type: \"HOME_LIST_SUCCESS\",\n            payload: [...data]\n          });\n        } catch (e) {\n          dispatch({\n            type: \"HOME_LIST_FAIL\",\n            payload: \"Someting went wrong\"\n          });\n        }\n      }\n    }\n\n    getHomes();\n  }, [dispatch, homesList]);\n  useEffect(() => {\n    if (match.params.id) {\n      setSelectedHome(homesList.filter(home => home._id === match.params.id)[0]);\n      setOpenHomeDetails(true);\n    }\n  }, [match.params.id, homesList]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    hideFooter: true,\n    children: [loading ? /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(ContainerInner, {\n      display: openHomeDetails ? \"none\" : \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(MapWrapper, {\n        children: /*#__PURE__*/_jsxDEV(GoogleApiWrapper, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ListWrapper, {\n        children: [state.map.selectedItem !== null && /*#__PURE__*/_jsxDEV(ListCard, { ...state.map.selectedItem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: state.map.selectedItem === null ? \"block\" : \"none\"\n          },\n          children: homesList.map((home, i) => /*#__PURE__*/_jsxDEV(ListCard, { ...home\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), openHomeDetails && selectedHome && /*#__PURE__*/_jsxDEV(HomeDetails, {\n      home: selectedHome,\n      back: () => {\n        setOpenHomeDetails(false);\n        setSelectedHome(null); // match.params.id = undefined;\n\n        history.goBack();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HomesPage, \"4nIcDtjIkOtTNoe1hJVp/g5SQFQ=\");\n\n_c5 = HomesPage;\nexport default HomesPage;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"ContainerInner\");\n$RefreshReg$(_c3, \"MapWrapper\");\n$RefreshReg$(_c4, \"ListWrapper\");\n$RefreshReg$(_c5, \"HomesPage\");","map":{"version":3,"names":["useState","useContext","useEffect","axios","StateContext","DispatchContext","Layout","styled","GoogleApiWrapper","ListCard","Footer","HomeDetails","Loading","Container","div","theme","primaryText","ContainerInner","display","MapWrapper","ListWrapper","HomesPage","match","history","state","homes","loading","error","homesList","dispatch","setHomesList","openHomeDetails","setOpenHomeDetails","selectedHome","setSelectedHome","getHomes","length","type","data","get","payload","e","params","id","filter","home","_id","map","selectedItem","i","goBack"],"sources":["C:/Users/דניאלה/Desktop/web project/webP/client/src/pages/homes.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { StateContext, DispatchContext } from \"../context/GlobalContext\";\r\nimport Layout from \"../components/Layout\";\r\nimport styled from \"styled-components\";\r\nimport GoogleApiWrapper from \"../components/Map\";\r\nimport ListCard from \"../components/ListCard\";\r\nimport Footer from \"../components/Footer\";\r\nimport HomeDetails from \"../components/HomeDetails\";\r\nimport Loading from \"../components/Loading\";\r\n\r\nconst Container = styled.div`\r\n  margin-top: 60px;\r\n  width: 100%;\r\n  padding: 0 calc((100vw - 1300px) / 2);\r\n  color: ${({ theme }) => theme.primaryText};\r\n`;\r\n\r\nconst ContainerInner = styled.div`\r\n  margin-top: 60px;\r\n  width: 100%;\r\n  color: ${({ theme }) => theme.primaryText};\r\n  display: ${({ display }) => display};\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n`;\r\n\r\nconst MapWrapper = styled.div`\r\n  flex: 1;\r\n  max-width: 1920px;\r\n  height: calc(100vh - 60px);\r\n  min-height: 200px;\r\n  position: relative;\r\n  @media screen and (max-width: 768px) {\r\n    /* width: 100%; */\r\n  }\r\n`;\r\nconst ListWrapper = styled.div`\r\n  width: 30%;\r\n  min-width: 400px;\r\n  padding: 0 1.5rem;\r\n  overflow-y: scroll;\r\n  height: calc(100vh - 60px);\r\n  @media screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #434343;\r\n    border-radius: 16px;\r\n    box-shadow: inset 2px 2px 2px hsl(0deg 0% 100% / 25%),\r\n      inset -2px -2px 2px rgb(0 0 0 / 25%);\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: linear-gradient(90deg, #434343, #434343 1px, #111 0, #111);\r\n  }\r\n  &::-webkit-scrollbar {\r\n    width: 16px;\r\n    height: 16px;\r\n  }\r\n`;\r\n\r\nconst HomesPage = ({ match, history }) => {\r\n  const state = useContext(StateContext);\r\n  const { homes, loading, error } = state.homesList;\r\n  const dispatch = useContext(DispatchContext);\r\n  const [homesList, setHomesList] = useState(homes);\r\n  const [openHomeDetails, setOpenHomeDetails] = useState(false);\r\n  const [selectedHome, setSelectedHome] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getHomes() {\r\n      if (homesList.length === 0) {\r\n        dispatch({ type: \"HOME_LIST_REQUEST\" });\r\n        try {\r\n          const { data } = await axios.get(\"/api/homes\");\r\n          setHomesList([...data]);\r\n          dispatch({ type: \"HOME_LIST_SUCCESS\", payload: [...data] });\r\n        } catch (e) {\r\n          dispatch({ type: \"HOME_LIST_FAIL\", payload: \"Someting went wrong\" });\r\n        }\r\n      }\r\n    }\r\n    getHomes();\r\n  }, [dispatch, homesList]);\r\n\r\n  useEffect(() => {\r\n    if (match.params.id) {\r\n      setSelectedHome(\r\n        homesList.filter((home) => home._id === match.params.id)[0]\r\n      );\r\n      setOpenHomeDetails(true);\r\n    }\r\n  }, [match.params.id, homesList]);\r\n  return (\r\n    <Layout hideFooter={true}>\r\n      {loading ? (\r\n        <Container>\r\n          <Loading />\r\n        </Container>\r\n      ) : (\r\n        <ContainerInner display={openHomeDetails ? \"none\" : \"flex\"}>\r\n          <MapWrapper>\r\n            <GoogleApiWrapper />\r\n          </MapWrapper>\r\n          <ListWrapper>\r\n            {state.map.selectedItem !== null && (\r\n              <ListCard {...state.map.selectedItem} />\r\n            )}\r\n            <div\r\n              style={{\r\n                display: state.map.selectedItem === null ? \"block\" : \"none\",\r\n              }}\r\n            >\r\n              {homesList.map((home, i) => (\r\n                <ListCard key={i} {...home} />\r\n              ))}\r\n            </div>\r\n            <Footer />\r\n          </ListWrapper>\r\n        </ContainerInner>\r\n      )}\r\n\r\n      {openHomeDetails && selectedHome && (\r\n        <HomeDetails\r\n          home={selectedHome}\r\n          back={() => {\r\n            setOpenHomeDetails(false);\r\n            setSelectedHome(null);\r\n            // match.params.id = undefined;\r\n            history.goBack();\r\n          }}\r\n        />\r\n      )}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default HomesPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}